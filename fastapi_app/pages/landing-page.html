<!DOCTYPE html>
<html lang="en-us">
  <head>
    {% set title='PeopleSun' %}
    {% include '_head.html' %}
    {% include '_style_msg_box.html' %}
  </head>
  <body onload="show_cookie_consent(); show_user_email_in_navbar();">
  {% include '_navbar.html' %}
    <main>
      <section class="project-setup two-columns">
          <div class="left">
              <div>
                    <h1>
                      Welcome!
                    </h1>
                    <p style="color:darkred">
                      This tool is still under development. The release is for testing purposes, and the tool is not yet suitable for designing energy systems (some of the calculations are still based on dummy data). [Last updated on 21.04.2023]
                    </p>
                    <p>
                        This open-source computer tool is part of the <a href="https://www.peoplesun.org">PeopleSuN project</a>, which contains a web-based app that aims to optimize the network structure as well as the power supply system for mini-grid systems.
                    </p>
                  <p>The features of the tool are listed below:</p>
                  <ul>
                      <li>
                        Automatic identification of buildings from the OpenStreetMap inside a given boundary.
                      </li>
                      <li>
                       Optimization of electrical mini-grids
                      </li>
                      <li>
                        Optimization of the power supply systems for mini-grids (PV, battery, and diesel-engine)
                      </li>
                      <li>
                        Automatic identification of buildings that are better to be served by individual solar home systems.
                      </li>
                  </ul>
                    <p>
                     The tool can be tested without registration. However, users are recommended to create an account to get access to larger computing capacity and to be able to store models.
                    </p>
                    <button
                          class="btn btn--long text-right"
                          type="button"
                          onclick="document.getElementById('msgBox').style.display='block'"
                        >
                          Test it (without an account)
                    </button>
              </div>
          </div>
                    <div class="right">
              <div>
                                      <h1>
                      Login
                    </h1>
                <form>
                  <div class="input-item">
                    <label for="userEmail" class="form-label">
                      Email
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      id="userEmail"
                      name="email"
                      placeholder="Enter your mail address"
                    />
                  </div>
                    <div class="input-item">
                    <label for="userPassword" class="form-label">
                      Password
                    </label>
                    <input
                      type="password"
                      class="form-control"
                      id="userPassword"
                      name="password"
                      placeholder="Enter your password"
                    />
                  </div>
                      <input type="checkbox" class="form-check-input" id="isEnabled"/>
                    <label for="isEnabled" > <span>&nbsp;Remember me</span></label>
                    <p></p>
                    <p style="text-align:left;">&nbsp;Don't have an account yet?
                        <a href="#"
                           onclick="document.getElementById('registration').style.display='block'"
                        >Register here</a>
                        <span style="float:right;">
                            <a href="#"
                               onclick="document.getElementById('forgotPassword').style.display='block'"
                            >&nbsp;Forgot your password?</a>
                        </span>
                    </p>
                    <button
                          class="btn btn--long text-right"
                          type="button"
                          onclick="login();"
                        >
                          Log in
                    </button>
                    <p id="responseMsg"></p>
                </form>
              </div>
          </div>
      </section>
             <div id="msgBox" class="modal" style="background-color: rgba(0,0,0,0.5); z-index: 999;">
              <form class="modal-content" style="max-width: 40rem">
                <div class="container">
                  <h1 style="text-align:left;">Using the planing tool without registration</h1>
                  <p style="text-align:left;">To test the planning tool, you do not need to register an account, a temporary account will be created automatically. However, if you use the planning tool without registering, please note:</p>
                    <p style="text-align:left;"> &bull; Your data will be automatically deleted after three hours</p>
                    <p style="text-align:left;"> &bull; If you log out, you lose access to your data</p>
                    <p style="text-align:left;"> &bull; The modeling time is limited to {{ MAX_DAYS }} days</p>
                    <p style="text-align:left;"> &bull; The number of allowed consumers is limited to {{ MAX_CONSUMER_ANONYMOUS }}</p>
                   <p style="text-align:left;"> &bull; The calculation time of your optimization model is limited to 5 minutes</p>
                    <p style="text-align:left;"> Please enter the letters shown below</p>
                    <div style="display: flex; align-items: center;">
                    <img id="captcha_img3" style="margin-right: 1rem;">
                    <a style="font-family: Lucida Sans Unicode; font-weight: 900; font-size: 2rem"
                       type="button"
                       onclick="get_captcha();"
                    >&#x21bb;</a>
                </div>
                  <div style="text-align: left;">
                  <p style="display:inline; text-align:left;"
                  >Captcha <i>(Hint: capital letters only)</i>
                </p>
                </div>
                <input
                  type="text"
                  class="form-control"
                  style="max-width: 20rem"
                  id="captcha_input3"
                  placeholder="Enter the capital letters shown above"
                  value=""
                  required
                />
                    <p id="responseMsg3"></p>
                  <div class="clearfix">
                      <button onclick="anonymous_login();" type="button" class="deletebtn">Continue</button>
                    <button onclick="document.getElementById('msgBox').style.display='none'" type="button" class="cancelbtn">Chancel</button>
                  </div>
                </div>
              </form>
            </div>
            <div id="consentCookie" class="modal" style="background-color: rgba(0,0,0,0.5); z-index: 999;">
              <form class="modal-content"  style="max-width: 40rem">
                <div class="container">
                  <h1 style="text-align:left;">Cookies</h1>
                  <p style="text-align:left;">This website uses cookies. These are strictly necessary to allow core
                      website functionality such as user login and account management. The website cannot be used
                      without them.</p>
                  <div class="clearfix">
                      <button onclick="consent_cookie(); document.getElementById('consentCookie').style.display='none';"
                              type="button"
                              class="deletebtn"
                      >Accept
                      </button>
                    <button onclick="document.getElementById('consentCookie').style.display='none'"
                            type="button" class="cancelbtn">Decline</button>
                  </div>
                </div>
              </form>
            </div>
            <div id="registration" class="modal" style="background-color: rgba(0,0,0,0.5); z-index: 999;">
              <form class="modal-content" style="max-width: 20rem">
                <div class="container">
                  <h1 style="text-align:left;">Registration</h1>
                  <div class="clearfix">
              <div class="input-item" style="text-align: left">
                <div style="display: flex; align-items: center;">
                    <img id="captcha_img2" style="margin-right: 1rem;">
                    <a style="font-family: Lucida Sans Unicode; font-weight: 900; font-size: 2rem"
                       type="button"
                       onclick="get_captcha();"
                    >&#x21bb;
                    </a>
                </div>
                  <p style="display:inline; text-align: left">
                      Captcha <i>(Hint: capital letters only)</i>
                </p>
                <input
                  type="text"
                  class="form-control"
                  id="captcha_input2"
                  placeholder="Please enter the capital letters shown above"
                  value=""
                  required
                />
                <p style="display:inline">
                  Email
                </p>
                <input
                  type="text"
                  class="form-control"
                  id="userEmail2"
                  placeholder="Enter your mail address"
                  value=""
                  required
                />
              </div>
                <div class="input-item" style="text-align: left">
                <p style="display:inline">
                  Password
                </p>
                <input
                  type="password"
                  class="form-control"
                  id="userPassword2"
                  placeholder="Enter your password"
                  value=""
                  required
                />
              </div>
                <div class="input-item" style="text-align: left">
                <p style="display:inline">
                  Repeat Password
                </p>
                <input
                  type="password"
                  class="form-control"
                  id="userPassword3"
                  placeholder="Enter your password"
                  value=""
                  required
                />
              </div>
              <p id="responseMsg2"></p>
                      <button onclick="add_user_to_db();"
                              type="button"
                              class="deletebtn"
                      >Register
                      </button>
                    <button onclick="document.getElementById('registration').style.display='none'"
                            type="button" class="cancelbtn">
                        Close
                    </button>
                  </div>
                </div>
              </form>
            </div>
            <div id="forgotPassword" class="modal" style="background-color: rgba(0,0,0,0.5); z-index: 999;">
              <form class="modal-content" style="max-width: 20rem">
                <div class="container">
                  <h1 style="text-align:left;">Reset Password</h1>
                    <p style="text-align: left">If you have forgotten your password, a link can be sent to your registered email address that
                        will allow you to reset your password.</p>
                  <div class="clearfix">
              <div class="input-item" style="text-align: left">
                <p style="display:inline">
                </p>
                <div style="display: flex; align-items: center;">
                    <img id="captcha_img" style="margin-right: 1rem;">
                    <a style="font-family: Lucida Sans Unicode; font-weight: 900; font-size: 2rem"
                       type="button"
                       onclick="get_captcha();"
                    >&#x21bb;
                    </a>
                </div>
                  <p style="display:inline; text-align: left">
                      Captcha <i>(Hint: capital letters only)</i>
                </p>
                <input
                  type="text"
                  class="form-control"
                  id="captcha_input"
                  placeholder="Please enter the capital letters shown above"
                  value=""
                  required
                />
               <p style="display:inline">
                  Email
                </p>
                <input
                  type="text"
                  class="form-control"
                  id="userEmail4"
                  placeholder="Enter your mail address"
                  value=""
                  required
                />
              </div>
              <p id="responseMsg4"></p>
                      <button onclick="send_reset_password_email();"
                              type="button"
                              class="deletebtn"
                      >Send Mail
                      </button>
                    <button onclick="document.getElementById('forgotPassword').style.display='none'"
                            type="button" class="cancelbtn">
                        Close
                    </button>
                  </div>
                </div>
              </form>
            </div>
    </main>
    {% include '_footer.html' %}
  </body>
{% include '_scripts.html' %}
<script>
const img = document.getElementById("captcha_img");
const img2 = document.getElementById("captcha_img2");
const img3 = document.getElementById("captcha_img3");
let hashedCaptcha;
function get_captcha(){
fetch("/get_captcha")
  .then(response => response.json())
  .then(data => {
    img.src = "data:image/jpeg;base64," + data.img;
    img2.src = "data:image/jpeg;base64," + data.img;
    img3.src = "data:image/jpeg;base64," + data.img;
    hashedCaptcha = data.hashed_captcha;
  });}
get_captcha();
</script>
</html>